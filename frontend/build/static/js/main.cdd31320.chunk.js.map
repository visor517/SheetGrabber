{"version":3,"sources":["components/ColName/ColName.module.css","components/ColName/ColName.js","components/Pagination/Pagination.js","components/Filter/Filter.js","components/Limiter/Limiter.js","components/Row/Row.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","ColName","keyName","onClick","arrow","classes","styles","pointer","push","ascending","descending","scope","className","join","Pagination","numRows","rowsLimit","activePage","setPageNum","pages","i","filter","page","length","map","index","liClass","e","target","blur","paginationHandler","Filter","onChange","value","toLowerCase","Limiter","limit","setLimit","type","min","max","defaultValue","number","Row","item","Object","values","val_i","String","App","useState","rows","setRows","preparedRows","setPreparedRows","pageNum","setRowsLimit","filterText","setFilterText","sortBy","undefined","isIncrease","sortSettings","setSortSettings","changeSort","oldSort","useEffect","axios","then","res","data","err","console","log","row","elem","toString","indexOf","sort","a","b","keys","id","colSpan","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cdd31320.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ascending\":\"ColName_ascending__2NuGR\",\"descending\":\"ColName_descending__262gK\",\"pointer\":\"ColName_pointer__3WTRy\"};","import styles from './ColName.module.css'\n\nexport default function ColName({ keyName, onClick, arrow }) {\n\n    let classes = [styles.pointer]\n    if (arrow === true) classes.push(styles.ascending)\n    if (arrow === false) classes.push(styles.descending)\n   \n    return (\n        <th scope=\"col\" className={classes.join(' ')} onClick={() => onClick(keyName)}>{ keyName }</th>\n    )\n}","export default function Pagination({ numRows, rowsLimit, activePage, setPageNum}) {\n\n    let pages = [], i = 0\n    do {\n        i++\n        pages.push(i)\n    } while (i*rowsLimit < numRows)\n\n    function paginationHandler(e, page) {\n        setPageNum(page)\n        e.target.blur() // убирает фокус после нажатия тк кнопка поменяет назначение\n    }\n\n    return (\n        <nav aria-label=\"Page navigation\" className=\"d-flex justify-content-center\">\n            <ul className=\"pagination\">\n                { pages.filter(page => {    // оставляет первую, последнию и по 4 соседних\n                        if (pages.length > 11) {\n                            if (page !== 1 && page !== pages.length && (page < activePage - 4 || page > activePage + 4)) {\n                                return false\n                            }\n                        }\n                        return true\n                    })\n                    .map((page, index)  => {\n                        let liClass = \"page-item\"\n                        if (page === activePage) liClass += \" active\"\n\n                        return (\n                            <li className={liClass} key={index}>\n                                <button className=\"page-link\" onClick={e => paginationHandler(e, page)}>{ page }</button>\n                            </li>\n                        )\n                }\n                ) }\n            </ul>\n        </nav>\n    )\n}","export default function Filter({ onChange }) {\n\n    return (\n        <div>\n            <span>Фильтр: </span><input onChange={e => onChange(e.target.value.toLowerCase())}></input>\n        </div>\n    )\n}","export default function Limiter({ limit, setLimit }) {\n\n    function handler (number) {\n        if (number >= 10 && number <=100) {\n            setLimit(number)\n        }\n    }\n   \n    return (\n        <div>\n            10 - 100 :\n            <input type=\"number\" min=\"10\" max=\"100\" className=\"ms-2\" defaultValue={limit} onChange={e => handler(e.target.value)} />\n        </div>\n    )\n}","export default function Row({ item }) {\n    return (\n        <tr>\n            {Object.values(item).map((value,val_i) => <td key={val_i}>{String(value)}</td>)}\n        </tr>\n    )\n}","import React, {useState, useEffect} from 'react'\nimport axios from 'axios'\nimport ColName from './components/ColName/ColName'\nimport Pagination from './components/Pagination/Pagination'\nimport Filter from './components/Filter/Filter'\nimport Limiter from './components/Limiter/Limiter'\nimport Row from './components/Row/Row'\n\nfunction App() {\n\n  const [rows, setRows] = useState([])\n  \n  // отфильтрованные, отсортированные\n  const [preparedRows, setPreparedRows] = useState([])\n  const [pageNum, setPageNum] = useState(1)\n  const [rowsLimit, setRowsLimit] = useState(50)\n  const [filterText, setFilterText] = useState('')\n  const [sortSettings, setSortSettings] = useState({\n    sortBy: undefined,\n    isIncrease: true \n  })\n\n  function changeSort(keyName) {\n    if (sortSettings.sortBy === keyName) {\n      setSortSettings(oldSort => ({ ...oldSort, 'isIncrease': !oldSort.isIncrease}))\n    }\n    else setSortSettings({sortBy: keyName, isIncrease: true})\n  }\n\n  useEffect(() => {\n    axios('http://127.0.0.1:8000/api/orders/')\n    .then(\n      res => {\n        setRows(res.data)\n      },\n      err => console.log('Ошибка получения данных')\n    )\n  }, [])\n\n  // обработка данных при изменении фильтра или сортировки\n  useEffect(() => {\n    setPreparedRows(\n      rows.filter(row =>     // ищем вхождение фильтра в одно из полей\n        Object.values(row).filter(elem =>\n            elem != null &&\n            elem.toString().toLowerCase().indexOf(filterText) !== -1).length > 0\n      )\n      .sort((a, b) => {\n        if (sortSettings.isIncrease) {\n          return a[sortSettings.sortBy] < b[sortSettings.sortBy] ? -1 : 1\n        }\n        else {\n          return a[sortSettings.sortBy] > b[sortSettings.sortBy] ? -1 : 1\n        }\n      })\n    )\n  }, [rows, filterText, sortSettings])\n\n  // переход на первую страницу при изменении лимита вывода строк на страницу\n  useEffect(() => setPageNum(1), [rowsLimit, preparedRows])\n\n  return (\n    <div className='container bg-light shadow bg-body rounded'>\n      <div className='row'>\n        <div className='col p-3'>\n          <div className=\"d-flex justify-content-between\">\n            <Filter onChange={setFilterText}/>\n            <Limiter limit={rowsLimit} setLimit={setRowsLimit} />\n          </div>\n          {rows.length > 0 ?\n            <table className=\"table\">\n              <thead>\n                <tr>\n                  { Object.keys(rows[0]).map(keyName => {\n                    let arrow = keyName === sortSettings.sortBy ? sortSettings.isIncrease : undefined\n                    return <ColName keyName={keyName} key={keyName} onClick={changeSort} arrow={arrow} />\n                  })}\n                </tr>\n              </thead>  \n              <tbody>\n                { preparedRows.length > 0 ? \n                      preparedRows.filter((row, index) => index >= (pageNum - 1) * rowsLimit && index < pageNum * rowsLimit)\n                      .map(row => <Row item={row} key={row.id} />) :\n                  <tr><td colSpan={Object.keys(rows[0]).length}>Нет данных</td></tr>\n                }\n              </tbody>\n            </table> :\n            <p>Загружается...</p>\n          }\n          <Pagination numRows={preparedRows.length} rowsLimit={rowsLimit} activePage={pageNum} setPageNum={setPageNum} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './style.css'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'bootstrap/dist/js/bootstrap.bundle.min'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}